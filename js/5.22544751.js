"use strict";(self["webpackChunkshopping_mall23"]=self["webpackChunkshopping_mall23"]||[]).push([[5],{1817:function(t,s,e){e.d(s,{A:function(){return m}});var o=function(){var t=this,s=t._self._c;return s("div",{staticClass:"commentsList"},t._l(t.comments,(function(e,o){return s("div",{key:e.comment_id,staticClass:"onecomment"},[s("div",{staticClass:"ocTop"},[s("img",{attrs:{src:e.user.avatar_url}}),s("span",[t._v(t._s(e.user.nick_name))]),s("div",{staticClass:"rateShow"},[s("van-rate",{attrs:{readonly:"",color:"#f4a213"},model:{value:t.scores[o],callback:function(s){t.$set(t.scores,o,s)},expression:"scores[index]"}})],1)]),s("div",{staticClass:"ocMain text-ellipsis-2"},[t._v(" "+t._s(e.content)+" ")]),s("div",{staticClass:"ocFooter"},[t._v(t._s(e.create_time))])])})),0)},n=[],a={data(){return{scores:this.commentsScores}},props:{comments:{type:Array,require:!0},commentsScores:{type:Array,require:!0}},created(){console.log("Yes"),console.log(this.comments),console.log(this.commentsScores)},watch:{commentsScores(t){console.log("change"),this.scores=t}}},c=a,r=e(1656),i=(0,r.A)(c,o,n,!1,null,"eb7ee08c",null),m=i.exports},5005:function(t,s,e){e.r(s),e.d(s,{default:function(){return p}});var o=function(){var t=this,s=t._self._c;return s("div",{staticClass:"comment"},[s("van-nav-bar",{attrs:{title:"所有评论","left-arrow":""},on:{"click-left":function(s){return t.$router.back()}}}),s("van-tabs",{model:{value:t.type,callback:function(s){t.type=s},expression:"type"}},[s("van-tab",{attrs:{title:"全部("+t.commentCount.all+")",name:"-1"}}),s("van-tab",{attrs:{title:"好评("+t.commentCount.praise+")",name:"10"}}),s("van-tab",{attrs:{title:"中评("+t.commentCount.review+")",name:"20"}}),s("van-tab",{attrs:{title:"差评("+t.commentCount.negative+")",name:"30"}})],1),s("div",{staticClass:"content"},[s("div",{staticClass:"commentsList"},[s("commentsListComponent",{attrs:{comments:t.commentsList,commentsScores:t.scores}})],1)])],1)},n=[],a=e(5720),c=e(3428);const r=(t,s,e)=>a.A.get("/comment/list",{params:{scoreType:t,goodsId:s,page:e}});var i=e(1817),m={components:{commentsListComponent:i.A},name:"commentIndex",data(){return{commentCount:{},commentsList:[],type:this.$route.query.type,scores:[]}},computed:{goodsId(){return this.$route.query.id}},methods:{async setCommentList(){const{data:{list:{data:t}}}=await r(this.type,this.goodsId,1);this.commentsList=t,console.log("List:"),console.log(this.commentsList)},async setCommentCount(){const{data:{total:t}}=await(0,c.L)(this.goodsId);this.commentCount=t},handleScores(){this.scores=this.commentsList.map((t=>{switch(t.score){case 10:return 5;case 20:return 3;case 30:return 1;default:return 0}}))}},async created(){await this.setCommentList(),await this.setCommentCount()},watch:{type(t){this.setCommentList(t,this.goodsId,1)},commentsList(){this.handleScores(),console.log("scores:"),console.log(this.scores)}}},l=m,u=e(1656),d=(0,u.A)(l,o,n,!1,null,"7eb6376b",null),p=d.exports},3428:function(t,s,e){e.d(s,{As:function(){return c},Ck:function(){return r},K4:function(){return n},L:function(){return i},j1:function(){return a}});var o=e(5720);const n=t=>{const{categoryId:s,goodsName:e,page:n}=t;return o.A.get("/goods/list",{params:{categoryId:s,goodsName:e,page:n}})},a=t=>o.A.get("/goods/detail",{params:{goodsId:t}}),c=t=>o.A.get("/goods.service/list",{params:{goodsId:t}}),r=(t,s)=>o.A.get("/comment/listRows",{params:{goodsId:t,limit:s}}),i=t=>o.A.get("/comment/total",{params:{goodsId:t}})}}]);
//# sourceMappingURL=5.22544751.js.map