{"version":3,"file":"js/273.27bb2cce.js","mappings":"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","sources":["webpack://shopping_mall23/./src/components/CommentsList.vue","webpack://shopping_mall23/src/components/CommentsList.vue","webpack://shopping_mall23/./src/components/CommentsList.vue?55d7","webpack://shopping_mall23/./src/components/CommentsList.vue?1166","webpack://shopping_mall23/./src/views/prodetail/index.vue","webpack://shopping_mall23/src/views/prodetail/index.vue","webpack://shopping_mall23/./src/views/prodetail/index.vue?f133","webpack://shopping_mall23/./src/views/prodetail/index.vue?3c54","webpack://shopping_mall23/./src/api/product/index.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"commentsList\"},_vm._l((_vm.comments),function(item,index){return _c('div',{key:item.comment_id,staticClass:\"onecomment\"},[_c('div',{staticClass:\"ocTop\"},[_c('img',{attrs:{\"src\":item.user.avatar_url}}),_c('span',[_vm._v(_vm._s(item.user.nick_name))]),_c('div',{staticClass:\"rateShow\"},[_c('van-rate',{attrs:{\"readonly\":\"\",\"color\":\"#f4a213\"},model:{value:(_vm.scores[index]),callback:function ($$v) {_vm.$set(_vm.scores, index, $$v)},expression:\"scores[index]\"}})],1)]),_c('div',{staticClass:\"ocMain text-ellipsis-2\"},[_vm._v(\" \"+_vm._s(item.content)+\" \")]),_c('div',{staticClass:\"ocFooter\"},[_vm._v(_vm._s(item.create_time))])])}),0)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"commentsList\">\r\n    <div\r\n      class=\"onecomment\"\r\n      v-for=\"(item, index) in comments\"\r\n      :key=\"item.comment_id\"\r\n    >\r\n      <div class=\"ocTop\">\r\n        <img :src=\"item.user.avatar_url\" />\r\n        <span>{{ item.user.nick_name }}</span>\r\n        <div class=\"rateShow\">\r\n          <van-rate v-model=\"scores[index]\" readonly color=\"#f4a213\" />\r\n        </div>\r\n      </div>\r\n      <div class=\"ocMain text-ellipsis-2\">\r\n        {{ item.content }}\r\n      </div>\r\n      <div class=\"ocFooter\">{{ item.create_time }}</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      scores: this.commentsScores\r\n    }\r\n  },\r\n  props: {\r\n    comments: {\r\n      type: Array,\r\n      require: true\r\n    },\r\n    commentsScores: {\r\n      type: Array,\r\n      require: true\r\n    }\r\n  },\r\n  created() {\r\n    console.log('Yes')\r\n    console.log(this.comments)\r\n    console.log(this.commentsScores)\r\n  },\r\n  watch: {\r\n    commentsScores(newValue) {\r\n      console.log('change')\r\n      this.scores = newValue\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.commentsList {\r\n  margin-top: 10px;\r\n  .onecomment {\r\n    // border-bottom: 1px solid red;\r\n    margin-top: 20px;\r\n    .ocTop {\r\n      height: 30px;\r\n      line-height: 30px;\r\n      img {\r\n        display: inline-block;\r\n        border-radius: 15px;\r\n        height: 30px;\r\n        width: 30px;\r\n      }\r\n      span {\r\n        font-size: 14px;\r\n        margin-left: 10px;\r\n        display: inline-block;\r\n        vertical-align: top;\r\n      }\r\n      .rateShow {\r\n        margin-left: 10px;\r\n        display: inline-block;\r\n        vertical-align: top;\r\n      }\r\n    }\r\n    .ocMain {\r\n      margin: 5px 0px;\r\n      font-size: 16px;\r\n    }\r\n    .ocFooter {\r\n      font-size: 14px;\r\n      color: #acacac;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CommentsList.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CommentsList.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./CommentsList.vue?vue&type=template&id=eb7ee08c&scoped=true\"\nimport script from \"./CommentsList.vue?vue&type=script&lang=js\"\nexport * from \"./CommentsList.vue?vue&type=script&lang=js\"\nimport style0 from \"./CommentsList.vue?vue&type=style&index=0&id=eb7ee08c&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"eb7ee08c\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"prodetail\"},[_c('van-nav-bar',{staticClass:\"test1\",attrs:{\"title\":\"商品详情\",\"left-arrow\":\"\",\"fixed\":\"\",\"placeholder\":\"\"},on:{\"click-left\":function($event){return _vm.$router.go(-1)}}}),_c('div',{staticClass:\"picShow\"},[_c('van-swipe',{attrs:{\"loop\":false},on:{\"change\":_vm.onChange},scopedSlots:_vm._u([{key:\"indicator\",fn:function(){return [(_vm.showPics)?_c('div',{staticClass:\"custom-indicator\"},[_vm._v(\" \"+_vm._s(_vm.currentPic + 1)+\"/\"+_vm._s(_vm.showPics.length)+\" \")]):_vm._e()]},proxy:true}])},_vm._l((_vm.showPics),function(pic){return _c('van-swipe-item',{key:pic.file_id},[_c('img',{attrs:{\"src\":pic.external_url}})])}),1)],1),_c('div',{staticClass:\"goodsDetail\"},[_c('div',[_c('div',{staticClass:\"priceAndsales\"},[_c('div',[_c('span',{staticClass:\"current-price\"},[_vm._v(\"￥\"+_vm._s(_vm.goodsInfo.goods_price_max))]),_c('span',{staticClass:\"original-price\"},[_vm._v(\"￥\"+_vm._s(_vm.goodsInfo.line_price_max))])]),_c('span',{staticClass:\"goods-sales\"},[_vm._v(\"已售\"+_vm._s(_vm.goodsInfo.goods_sales))])]),_c('div',{staticClass:\"name\"},[_c('span',{staticClass:\"goods-name text-ellipsis-2\"},[_vm._v(_vm._s(_vm.goodsInfo.goods_name))])])])]),(_vm.serviceList.length > 0)?_c('div',{staticClass:\"serves\"},[_vm._l((2),function(i){return _c('div',{key:i,staticClass:\"oneserve\"},[_c('van-icon',{attrs:{\"name\":\"passed\"}}),_c('span',[_vm._v(_vm._s(_vm.serviceList[i - 1].name))])],1)}),_c('span',{staticClass:\"arrows\",on:{\"click\":function($event){_vm.serveSheetShow = true}}},[_vm._v(\" 共\"+_vm._s(_vm.serviceList.length)+\"项 \"),_c('van-icon',{attrs:{\"name\":\"arrow\"}})],1)],2):_vm._e(),_c('div',{staticClass:\"comments\"},[_c('div',{staticClass:\"comTop\"},[_c('span',[_vm._v(\"商品评论(\"+_vm._s(_vm.commentsCount)+\"条)\")]),_c('span',{on:{\"click\":function($event){return _vm.$router.push(`/comment?id=${_vm.goodsId}&type=-1`)}}},[_vm._v(\"查看更多\"),_c('van-icon',{attrs:{\"name\":\"arrow\"}})],1)]),_c('commentsList',{attrs:{\"comments\":_vm.comments,\"commentsScores\":_vm.commentsScores}})],1),_c('div',{staticClass:\"prodescribe\"},[_c('span',[_vm._v(\"商品描述\")]),_vm._l((_vm.showPics),function(item){return _c('img',{key:item.file_id,attrs:{\"src\":item.external_url}})})],2),_c('div',{staticClass:\"Footer\"},[_c('div',{staticClass:\"toHome UpAndDown\"},[_c('van-icon',{attrs:{\"name\":\"wap-home-o\"}}),_c('span',[_vm._v(\"主页\")])],1),_c('div',{staticClass:\"toCart UpAndDown\"},[_c('van-icon',{attrs:{\"name\":\"shopping-cart-o\"}}),_c('span',[_vm._v(\"购物车\")])],1),_c('button',{staticClass:\"addCart\",on:{\"click\":function($event){_vm.sheetShow = true\n        _vm.isAddToCart = true}}},[_vm._v(\" 加入购物车 \")]),_c('button',{staticClass:\"buy\",on:{\"click\":function($event){_vm.sheetShow = true\n        _vm.isAddToCart = false}}},[_vm._v(\" 立即购买 \")])]),_c('div',{staticClass:\"ServeSheet\"},[_c('van-action-sheet',{attrs:{\"actions\":_vm.actions,\"description\":\"所有服务\",\"close-on-click-action\":\"\"},model:{value:(_vm.serveSheetShow),callback:function ($$v) {_vm.serveSheetShow=$$v},expression:\"serveSheetShow\"}})],1),_c('div',{staticClass:\"CartSheet\"},[_c('van-action-sheet',{attrs:{\"title\":_vm.sheetTitle,\"cancel-text\":_vm.sheetCancle,\"closeable\":false},on:{\"cancel\":_vm.CartOrPay},model:{value:(_vm.sheetShow),callback:function ($$v) {_vm.sheetShow=$$v},expression:\"sheetShow\"}},[_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"buyGoodsInfo\"},[_c('img',{attrs:{\"src\":_vm.goodsInfo.goods_image}}),_c('div',[_c('span',{staticClass:\"price\"},[_vm._v(\"￥\"+_vm._s(_vm.goodsInfo.goods_price_min))]),_c('span',{staticClass:\"allMounts\"},[_vm._v(\"库存:\"+_vm._s(_vm.goodsInfo.stock_total))])])]),_c('div',{staticClass:\"buyCounts\"},[_c('span',[_vm._v(\"数量\")]),_c('div',[_c('CountBox',{attrs:{\"value\":_vm.buyCounts},on:{\"add\":_vm.addBuyCounts,\"sub\":_vm.subBuyCounts}})],1)])])])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"prodetail\">\r\n    <van-nav-bar\r\n      class=\"test1\"\r\n      title=\"商品详情\"\r\n      left-arrow\r\n      @click-left=\"$router.go(-1)\"\r\n      fixed\r\n      placeholder\r\n    ></van-nav-bar>\r\n    <!-- 手动轮播图 -->\r\n    <div class=\"picShow\">\r\n      <van-swipe @change=\"onChange\" :loop=\"false\">\r\n        <van-swipe-item v-for=\"pic in showPics\" :key=\"pic.file_id\">\r\n          <img :src=\"pic.external_url\" />\r\n        </van-swipe-item>\r\n        <template #indicator>\r\n          <div v-if=\"showPics\" class=\"custom-indicator\">\r\n            {{ currentPic + 1 }}/{{ showPics.length }}\r\n          </div>\r\n        </template>\r\n      </van-swipe>\r\n    </div>\r\n    <div class=\"goodsDetail\">\r\n      <div>\r\n        <div class=\"priceAndsales\">\r\n          <div>\r\n            <span class=\"current-price\">￥{{ goodsInfo.goods_price_max }}</span>\r\n            <span class=\"original-price\">￥{{ goodsInfo.line_price_max }}</span>\r\n          </div>\r\n          <span class=\"goods-sales\">已售{{ goodsInfo.goods_sales }}</span>\r\n        </div>\r\n        <div class=\"name\">\r\n          <span class=\"goods-name text-ellipsis-2\">{{\r\n            goodsInfo.goods_name\r\n          }}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"serves\" v-if=\"serviceList.length > 0\">\r\n      <div v-for=\"i in 2\" :key=\"i\" class=\"oneserve\">\r\n        <van-icon name=\"passed\" />\r\n        <span>{{ serviceList[i - 1].name }}</span>\r\n      </div>\r\n      <span class=\"arrows\" @click=\"serveSheetShow = true\">\r\n        共{{ serviceList.length }}项\r\n        <van-icon name=\"arrow\" />\r\n      </span>\r\n    </div>\r\n    <div class=\"comments\">\r\n      <div class=\"comTop\">\r\n        <span>商品评论({{ commentsCount }}条)</span>\r\n        <span @click=\"$router.push(`/comment?id=${goodsId}&type=-1`)\"\r\n          >查看更多<van-icon name=\"arrow\"\r\n        /></span>\r\n      </div>\r\n      <commentsList\r\n        :comments=\"comments\"\r\n        :commentsScores=\"commentsScores\"\r\n      ></commentsList>\r\n    </div>\r\n    <div class=\"prodescribe\">\r\n      <span>商品描述</span>\r\n      <img\r\n        v-for=\"item in showPics\"\r\n        :key=\"item.file_id\"\r\n        :src=\"item.external_url\"\r\n      />\r\n    </div>\r\n    <div class=\"Footer\">\r\n      <div class=\"toHome UpAndDown\">\r\n        <van-icon name=\"wap-home-o\" />\r\n        <span>主页</span>\r\n      </div>\r\n      <div class=\"toCart UpAndDown\">\r\n        <van-icon name=\"shopping-cart-o\" />\r\n        <span>购物车</span>\r\n      </div>\r\n      <button\r\n        class=\"addCart\"\r\n        @click=\"\r\n          sheetShow = true\r\n          isAddToCart = true\r\n        \"\r\n      >\r\n        加入购物车\r\n      </button>\r\n      <button\r\n        class=\"buy\"\r\n        @click=\"\r\n          sheetShow = true\r\n          isAddToCart = false\r\n        \"\r\n      >\r\n        立即购买\r\n      </button>\r\n    </div>\r\n\r\n    <!-- 所有服务面板 -->\r\n    <div class=\"ServeSheet\">\r\n      <van-action-sheet\r\n        v-model=\"serveSheetShow\"\r\n        :actions=\"actions\"\r\n        description=\"所有服务\"\r\n        close-on-click-action\r\n      />\r\n    </div>\r\n\r\n    <div class=\"CartSheet\">\r\n      <!-- 加入购物车和立即购买动作面板 -->\r\n      <van-action-sheet\r\n        v-model=\"sheetShow\"\r\n        :title=\"sheetTitle\"\r\n        :cancel-text=\"sheetCancle\"\r\n        :closeable=\"false\"\r\n        @cancel=\"CartOrPay\"\r\n      >\r\n        <div class=\"content\">\r\n          <div class=\"buyGoodsInfo\">\r\n            <img :src=\"goodsInfo.goods_image\" />\r\n            <div>\r\n              <span class=\"price\">￥{{ goodsInfo.goods_price_min }}</span>\r\n              <span class=\"allMounts\">库存:{{ goodsInfo.stock_total }}</span>\r\n            </div>\r\n          </div>\r\n          <div class=\"buyCounts\">\r\n            <span>数量</span>\r\n            <div>\r\n              <CountBox\r\n                :value=\"buyCounts\"\r\n                @add=\"addBuyCounts\"\r\n                @sub=\"subBuyCounts\"\r\n              ></CountBox>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </van-action-sheet>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  searchGoods,\r\n  getGoodsComment,\r\n  getGoodsCommentCount,\r\n  getGoodsService\r\n} from '@/api/product'\r\nimport { addCart } from '@/api/cart'\r\nimport CountBox from '@/components/CountBox.vue'\r\nimport CommentsList from '@/components/CommentsList'\r\nexport default {\r\n  name: 'prodetailIndex',\r\n  components: {\r\n    CountBox,\r\n    CommentsList\r\n  },\r\n  data() {\r\n    return {\r\n      isAddToCart: true,\r\n      sheetShow: false,\r\n      serveSheetShow: false,\r\n      i: 0,\r\n      tmpRateValue: 5,\r\n      currentPic: 0,\r\n      goodsInfo: {},\r\n      showPics: [],\r\n      buyCounts: 1,\r\n      serviceList: [],\r\n      comments: [],\r\n      commentsCount: 0,\r\n      commentsScores: []\r\n    }\r\n  },\r\n  computed: {\r\n    goodsId() {\r\n      return this.$route.params.id\r\n    },\r\n    sheetTitle() {\r\n      if (this.isAddToCart) return '购物车'\r\n      else return '购买'\r\n    },\r\n    sheetCancle() {\r\n      if (this.goodsInfo.stock_total === 0) return '商品已售罄'\r\n      if (this.isAddToCart) return '加入购物车'\r\n      else return '立即购买'\r\n    },\r\n    actions() {\r\n      return this.serviceList.map(item => {\r\n        return {\r\n          name: item.name,\r\n          subname: item.summary,\r\n          color: '#ff5d33'\r\n        }\r\n      })\r\n    }\r\n  },\r\n  async created() {\r\n    //获取商品信息\r\n    await this.getGoodsInfo()\r\n    //获取商品服务\r\n    await this.setServiceList()\r\n    //获取评论总数\r\n    await this.setCommentsCount()\r\n    //获取两条评论\r\n    await this.setComments()\r\n    //处理评论分数\r\n    this.handleCommentsScores()\r\n  },\r\n  methods: {\r\n    onChange(index) {\r\n      this.currentPic = index\r\n    },\r\n    async getGoodsInfo() {\r\n      // console.log('goodsId:')\r\n      // console.log(this.goodsId)\r\n      const res = await searchGoods(this.goodsId)\r\n      this.goodsInfo = res.data.detail\r\n      this.showPics = this.goodsInfo.goods_images\r\n      console.log('goodsInfo:')\r\n      console.log(this.goodsInfo)\r\n    },\r\n    //设置商品服务\r\n    async setServiceList() {\r\n      const {\r\n        data: { list }\r\n      } = await getGoodsService(this.goodsId)\r\n      this.serviceList = list\r\n      console.log(this.serviceList)\r\n    },\r\n    //设置评论总数\r\n    async setCommentsCount() {\r\n      const {\r\n        data: {\r\n          total: { all }\r\n        }\r\n      } = await getGoodsCommentCount(this.goodsId)\r\n      this.commentsCount = all\r\n    },\r\n    //设置展示的评论\r\n    async setComments() {\r\n      const {\r\n        data: { list }\r\n      } = await getGoodsComment(this.goodsId, 2)\r\n      this.comments = list\r\n    },\r\n    //处理评价星级\r\n    handleCommentsScores() {\r\n      this.commentsScores = this.comments.map(item => {\r\n        console.log(item.score)\r\n        switch (item.score) {\r\n          case 10:\r\n            return 5\r\n          case 20:\r\n            return 3\r\n          case 30:\r\n            return 1\r\n          default:\r\n            return 0\r\n        }\r\n      })\r\n    },\r\n    //加入购物车或是立即购买逻辑\r\n    CartOrPay() {\r\n      if (this.goodsInfo.stock_total === 0) {\r\n        this.$toast('商品没有啦！')\r\n        this.sheetShow = false\r\n        return\r\n      }\r\n      // 验证登录\r\n      if (!this.$store.getters.token) {\r\n        this.$dialog\r\n          .confirm({\r\n            message: '您还没有登录哦~',\r\n            confirmButtonText: '去登录',\r\n            cancelButtonText: '确定'\r\n          })\r\n          .then(() => {\r\n            // 去登录\r\n            this.$router.replace({\r\n              path: `/login?forwardUrl=${this.$route.fullPath}`\r\n            })\r\n          })\r\n          .catch(() => {\r\n            // 取消\r\n          })\r\n      }\r\n      //加入购物车\r\n      if (this.isAddToCart) {\r\n        addCart(this.goodsInfo.goods_id, this.buyCounts)\r\n        this.$toast('已加入购物车')\r\n        console.log('success')\r\n        this.sheetShow = false\r\n      }\r\n      //立即购买\r\n      else {\r\n        this.$router.push({\r\n          path: '/pay',\r\n          query: {\r\n            mode: 'buyNow',\r\n            goodsInfo: {\r\n              goodsId: this.goodsInfo.goods_id,\r\n              goodsNum: this.buyCounts,\r\n              goodsSkuId: 0\r\n            }\r\n          }\r\n        })\r\n      }\r\n    },\r\n    subBuyCounts() {\r\n      this.buyCounts--\r\n    },\r\n    addBuyCounts() {\r\n      this.buyCounts++\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.prodetail {\r\n  // margin: 0;\r\n  // padding: 0;\r\n  // position: relative;\r\n  background-color: #fafafa;\r\n  .picShow {\r\n    height: 375px;\r\n    width: 375px;\r\n    margin-top: 5px;\r\n    .custom-indicator {\r\n      position: absolute;\r\n      right: 5px;\r\n      bottom: 0px;\r\n      border-radius: 5px;\r\n      padding: 2px 5px;\r\n      font-size: 12px;\r\n      background: rgba(0, 0, 0, 0.1);\r\n    }\r\n    img {\r\n      width: 375px;\r\n      height: 375px;\r\n    }\r\n  }\r\n  .goodsDetail {\r\n    background-color: #ffffff;\r\n    margin-top: 20px;\r\n    .priceAndsales {\r\n      padding: 10px;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      span {\r\n        display: inline-block;\r\n      }\r\n      .current-price {\r\n        font-size: 24px;\r\n        color: red;\r\n      }\r\n      .current-price::first-letter {\r\n        font-size: 16px;\r\n      }\r\n      .original-price {\r\n        font-size: 16px;\r\n        color: #acacac;\r\n        text-decoration-line: line-through;\r\n        text-decoration-style: solid;\r\n        text-decoration-color: #acacac;\r\n      }\r\n      .goods-sales {\r\n        font-size: 16px;\r\n        color: #acacac;\r\n        position: relative;\r\n        top: 5px;\r\n      }\r\n    }\r\n    .name {\r\n      padding: 0px 10px;\r\n      .goods-name {\r\n        line-height: 20px;\r\n        font-size: 16px;\r\n      }\r\n    }\r\n  }\r\n  .serves::after {\r\n    content: '';\r\n    display: block;\r\n    clear: both;\r\n  }\r\n  .serves {\r\n    height: 50px;\r\n    line-height: 50px;\r\n    background-color: #fafafa;\r\n    .oneserve {\r\n      margin-left: 10px;\r\n      color: red;\r\n      float: left;\r\n      font-size: 14px;\r\n      span {\r\n        margin-left: 5px;\r\n        color: black;\r\n      }\r\n    }\r\n    .arrows {\r\n      float: right;\r\n      margin-right: 5px;\r\n    }\r\n  }\r\n  .comments {\r\n    padding: 10px;\r\n    background-color: #ffffff;\r\n    .comTop::after {\r\n      content: '';\r\n      display: block;\r\n      clear: both;\r\n    }\r\n    .comTop {\r\n      span:first-child {\r\n        font-size: 16px;\r\n        float: left;\r\n      }\r\n      span:last-child {\r\n        float: right;\r\n        font-size: 16px;\r\n        .van-icon {\r\n          vertical-align: baseline;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .prodescribe {\r\n    margin-top: 10px;\r\n    margin-bottom: 50px;\r\n    background-color: #ffffff;\r\n    span {\r\n      margin-left: 10px;\r\n      font-size: 16px;\r\n    }\r\n    img {\r\n      width: 375px;\r\n    }\r\n  }\r\n  .Footer {\r\n    width: 375px;\r\n    height: 50px;\r\n    box-shadow: 0px 0px 5px gray;\r\n    background-color: #ffffff;\r\n    padding: 20px;\r\n    position: fixed;\r\n    bottom: 0px;\r\n    left: 0px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    .UpAndDown {\r\n      display: flex;\r\n      flex-direction: column;\r\n      align-items: center;\r\n      .van-icon {\r\n        font-size: 20px;\r\n      }\r\n      span {\r\n        font-size: 16px;\r\n      }\r\n    }\r\n    button {\r\n      height: 30px;\r\n      width: 80px;\r\n      border: 0;\r\n      border-radius: 15px;\r\n      font-size: 14px;\r\n      color: white;\r\n      background-image: linear-gradient(\r\n        to right,\r\n        #ffb800 30px,\r\n        rgb(224, 213, 110) 80px\r\n      );\r\n    }\r\n    .buy {\r\n      background-image: linear-gradient(\r\n        to right,\r\n        #ff5d33 30px,\r\n        rgb(245, 127, 127) 80px\r\n      );\r\n    }\r\n  }\r\n  .ServeSheet {\r\n    .van-action-sheet__name {\r\n      color: #ff5d33;\r\n      font-weight: normal;\r\n    }\r\n    .van-action-sheet__subname {\r\n      color: rgb(64, 27, 27);\r\n    }\r\n  }\r\n  .CartSheet {\r\n    .content {\r\n      height: 150px;\r\n      width: 375px;\r\n      background-color: #ffffff;\r\n      padding: 10px;\r\n      .buyGoodsInfo {\r\n        display: flex;\r\n        img {\r\n          width: 100px;\r\n          height: 100px;\r\n        }\r\n        div {\r\n          padding: 20px 0;\r\n          display: flex;\r\n          flex-direction: column;\r\n          .price {\r\n            color: red;\r\n            font-size: 30px;\r\n          }\r\n          .price::first-letter {\r\n            font-size: 16px;\r\n          }\r\n          .allMounts {\r\n            margin-left: 10px;\r\n            color: #acacac;\r\n            font-size: 16px;\r\n          }\r\n        }\r\n      }\r\n      .buyCounts {\r\n        margin-top: 10px;\r\n        display: flex;\r\n        justify-content: space-between;\r\n        span {\r\n          font-size: 16px;\r\n        }\r\n        div {\r\n          font-size: 16px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=c2a2cba8&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=c2a2cba8&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c2a2cba8\",\n  null\n  \n)\n\nexport default component.exports","import request from '@/utils/request'\r\n\r\n//搜索相应关键词的商品\r\nexport const searchPro = searchObj => {\r\n  const { categoryId, goodsName, page } = searchObj\r\n  return request.get('/goods/list', {\r\n    params: {\r\n      categoryId: categoryId,\r\n      goodsName: goodsName,\r\n      page: page\r\n    }\r\n  })\r\n}\r\n\r\n//依据商品id获得商品信息\r\nexport const searchGoods = goodsId => {\r\n  return request.get('/goods/detail', {\r\n    params: {\r\n      goodsId\r\n    }\r\n  })\r\n}\r\n\r\n//获取商品保障服务\r\nexport const getGoodsService = goodsId => {\r\n  return request.get('/goods.service/list', {\r\n    params: {\r\n      goodsId\r\n    }\r\n  })\r\n}\r\n\r\n//获取nums条商品评论\r\nexport const getGoodsComment = (goodsId, limit) => {\r\n  return request.get('/comment/listRows', {\r\n    params: {\r\n      goodsId,\r\n      limit\r\n    }\r\n  })\r\n}\r\n\r\n//获取商品评价总数\r\nexport const getGoodsCommentCount = goodsId => {\r\n  return request.get('/comment/total', {\r\n    params: {\r\n      goodsId\r\n    }\r\n  })\r\n}\r\n"],"names":["render","_vm","this","_c","_self","staticClass","_l","comments","item","index","key","comment_id","attrs","user","avatar_url","_v","_s","nick_name","model","value","scores","callback","$$v","$set","expression","content","create_time","staticRenderFns","data","commentsScores","props","type","Array","require","created","console","log","watch","newValue","component","on","$event","$router","go","onChange","scopedSlots","_u","fn","showPics","currentPic","length","_e","proxy","pic","file_id","external_url","goodsInfo","goods_price_max","line_price_max","goods_sales","goods_name","serviceList","i","name","serveSheetShow","commentsCount","push","goodsId","sheetShow","isAddToCart","actions","sheetTitle","sheetCancle","CartOrPay","goods_image","goods_price_min","stock_total","buyCounts","addBuyCounts","subBuyCounts","components","CountBox","CommentsList","tmpRateValue","computed","$route","params","id","map","subname","summary","color","getGoodsInfo","setServiceList","setCommentsCount","setComments","handleCommentsScores","methods","res","searchGoods","detail","goods_images","list","getGoodsService","total","all","getGoodsCommentCount","getGoodsComment","score","$toast","$store","getters","token","$dialog","confirm","message","confirmButtonText","cancelButtonText","then","replace","path","fullPath","catch","addCart","goods_id","query","mode","goodsNum","goodsSkuId","searchPro","searchObj","categoryId","goodsName","page","request","get","limit"],"sourceRoot":""}