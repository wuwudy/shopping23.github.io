{"version":3,"file":"js/5.22544751.js","mappings":"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","sources":["webpack://shopping_mall23/./src/components/CommentsList.vue","webpack://shopping_mall23/src/components/CommentsList.vue","webpack://shopping_mall23/./src/components/CommentsList.vue?55d7","webpack://shopping_mall23/./src/components/CommentsList.vue?1166","webpack://shopping_mall23/./src/views/comment/index.vue","webpack://shopping_mall23/./src/api/comment/index.js","webpack://shopping_mall23/src/views/comment/index.vue","webpack://shopping_mall23/./src/views/comment/index.vue?27ec","webpack://shopping_mall23/./src/views/comment/index.vue?2f6e","webpack://shopping_mall23/./src/api/product/index.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"commentsList\"},_vm._l((_vm.comments),function(item,index){return _c('div',{key:item.comment_id,staticClass:\"onecomment\"},[_c('div',{staticClass:\"ocTop\"},[_c('img',{attrs:{\"src\":item.user.avatar_url}}),_c('span',[_vm._v(_vm._s(item.user.nick_name))]),_c('div',{staticClass:\"rateShow\"},[_c('van-rate',{attrs:{\"readonly\":\"\",\"color\":\"#f4a213\"},model:{value:(_vm.scores[index]),callback:function ($$v) {_vm.$set(_vm.scores, index, $$v)},expression:\"scores[index]\"}})],1)]),_c('div',{staticClass:\"ocMain text-ellipsis-2\"},[_vm._v(\" \"+_vm._s(item.content)+\" \")]),_c('div',{staticClass:\"ocFooter\"},[_vm._v(_vm._s(item.create_time))])])}),0)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"commentsList\">\r\n    <div\r\n      class=\"onecomment\"\r\n      v-for=\"(item, index) in comments\"\r\n      :key=\"item.comment_id\"\r\n    >\r\n      <div class=\"ocTop\">\r\n        <img :src=\"item.user.avatar_url\" />\r\n        <span>{{ item.user.nick_name }}</span>\r\n        <div class=\"rateShow\">\r\n          <van-rate v-model=\"scores[index]\" readonly color=\"#f4a213\" />\r\n        </div>\r\n      </div>\r\n      <div class=\"ocMain text-ellipsis-2\">\r\n        {{ item.content }}\r\n      </div>\r\n      <div class=\"ocFooter\">{{ item.create_time }}</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      scores: this.commentsScores\r\n    }\r\n  },\r\n  props: {\r\n    comments: {\r\n      type: Array,\r\n      require: true\r\n    },\r\n    commentsScores: {\r\n      type: Array,\r\n      require: true\r\n    }\r\n  },\r\n  created() {\r\n    console.log('Yes')\r\n    console.log(this.comments)\r\n    console.log(this.commentsScores)\r\n  },\r\n  watch: {\r\n    commentsScores(newValue) {\r\n      console.log('change')\r\n      this.scores = newValue\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.commentsList {\r\n  margin-top: 10px;\r\n  .onecomment {\r\n    // border-bottom: 1px solid red;\r\n    margin-top: 20px;\r\n    .ocTop {\r\n      height: 30px;\r\n      line-height: 30px;\r\n      img {\r\n        display: inline-block;\r\n        border-radius: 15px;\r\n        height: 30px;\r\n        width: 30px;\r\n      }\r\n      span {\r\n        font-size: 14px;\r\n        margin-left: 10px;\r\n        display: inline-block;\r\n        vertical-align: top;\r\n      }\r\n      .rateShow {\r\n        margin-left: 10px;\r\n        display: inline-block;\r\n        vertical-align: top;\r\n      }\r\n    }\r\n    .ocMain {\r\n      margin: 5px 0px;\r\n      font-size: 16px;\r\n    }\r\n    .ocFooter {\r\n      font-size: 14px;\r\n      color: #acacac;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CommentsList.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CommentsList.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./CommentsList.vue?vue&type=template&id=eb7ee08c&scoped=true\"\nimport script from \"./CommentsList.vue?vue&type=script&lang=js\"\nexport * from \"./CommentsList.vue?vue&type=script&lang=js\"\nimport style0 from \"./CommentsList.vue?vue&type=style&index=0&id=eb7ee08c&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"eb7ee08c\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"comment\"},[_c('van-nav-bar',{attrs:{\"title\":\"所有评论\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.$router.back()}}}),_c('van-tabs',{model:{value:(_vm.type),callback:function ($$v) {_vm.type=$$v},expression:\"type\"}},[_c('van-tab',{attrs:{\"title\":'全部(' + _vm.commentCount.all + ')',\"name\":\"-1\"}}),_c('van-tab',{attrs:{\"title\":'好评(' + _vm.commentCount.praise + ')',\"name\":\"10\"}}),_c('van-tab',{attrs:{\"title\":'中评(' + _vm.commentCount.review + ')',\"name\":\"20\"}}),_c('van-tab',{attrs:{\"title\":'差评(' + _vm.commentCount.negative + ')',\"name\":\"30\"}})],1),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"commentsList\"},[_c('commentsListComponent',{attrs:{\"comments\":_vm.commentsList,\"commentsScores\":_vm.scores}})],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from '@/utils/request'\r\n\r\nimport { getGoodsCommentCount } from '@/api/product'\r\n\r\n//获取商品评价列表\r\nexport const getGoodsCommentList = (scoreType, goodsId, page) => {\r\n  return request.get('/comment/list', {\r\n    params: {\r\n      scoreType,\r\n      goodsId,\r\n      page\r\n    }\r\n  })\r\n}\r\n\r\nexport { getGoodsCommentCount }\r\n","<template>\r\n  <div class=\"comment\">\r\n    <van-nav-bar title=\"所有评论\" left-arrow @click-left=\"$router.back()\" />\r\n    <van-tabs v-model=\"type\">\r\n      <van-tab :title=\"'全部(' + commentCount.all + ')'\" name=\"-1\"></van-tab>\r\n      <van-tab :title=\"'好评(' + commentCount.praise + ')'\" name=\"10\"></van-tab>\r\n      <van-tab :title=\"'中评(' + commentCount.review + ')'\" name=\"20\"></van-tab>\r\n      <van-tab\r\n        :title=\"'差评(' + commentCount.negative + ')'\"\r\n        name=\"30\"\r\n      ></van-tab>\r\n    </van-tabs>\r\n    <div class=\"content\">\r\n      <div class=\"commentsList\">\r\n        <commentsListComponent\r\n          :comments=\"commentsList\"\r\n          :commentsScores=\"scores\"\r\n        ></commentsListComponent>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getGoodsCommentCount, getGoodsCommentList } from '@/api/comment'\r\nimport commentsListComponent from '@/components/CommentsList'\r\nexport default {\r\n  components: {\r\n    commentsListComponent\r\n  },\r\n  name: 'commentIndex',\r\n  data() {\r\n    return {\r\n      commentCount: {},\r\n      commentsList: [],\r\n      type: this.$route.query.type,\r\n      scores: []\r\n    }\r\n  },\r\n  computed: {\r\n    goodsId() {\r\n      return this.$route.query.id\r\n    }\r\n  },\r\n  methods: {\r\n    //设置评论列表\r\n    async setCommentList() {\r\n      const {\r\n        data: {\r\n          list: { data }\r\n        }\r\n      } = await getGoodsCommentList(this.type, this.goodsId, 1)\r\n      this.commentsList = data\r\n      console.log('List:')\r\n\r\n      console.log(this.commentsList)\r\n    },\r\n    //设置评论数\r\n    async setCommentCount() {\r\n      const {\r\n        data: { total }\r\n      } = await getGoodsCommentCount(this.goodsId)\r\n      this.commentCount = total\r\n    },\r\n    //处理评价星级\r\n    handleScores() {\r\n      this.scores = this.commentsList.map(item => {\r\n        switch (item.score) {\r\n          case 10:\r\n            return 5\r\n          case 20:\r\n            return 3\r\n          case 30:\r\n            return 1\r\n          default:\r\n            return 0\r\n        }\r\n      })\r\n    }\r\n  },\r\n  async created() {\r\n    await this.setCommentList()\r\n    await this.setCommentCount()\r\n  },\r\n  watch: {\r\n    type(newValue) {\r\n      this.setCommentList(newValue, this.goodsId, 1)\r\n    },\r\n    commentsList() {\r\n      this.handleScores()\r\n      console.log('scores:')\r\n      console.log(this.scores)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.comment {\r\n  .commentsList {\r\n    padding: 10px;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=7eb6376b&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=7eb6376b&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7eb6376b\",\n  null\n  \n)\n\nexport default component.exports","import request from '@/utils/request'\r\n\r\n//搜索相应关键词的商品\r\nexport const searchPro = searchObj => {\r\n  const { categoryId, goodsName, page } = searchObj\r\n  return request.get('/goods/list', {\r\n    params: {\r\n      categoryId: categoryId,\r\n      goodsName: goodsName,\r\n      page: page\r\n    }\r\n  })\r\n}\r\n\r\n//依据商品id获得商品信息\r\nexport const searchGoods = goodsId => {\r\n  return request.get('/goods/detail', {\r\n    params: {\r\n      goodsId\r\n    }\r\n  })\r\n}\r\n\r\n//获取商品保障服务\r\nexport const getGoodsService = goodsId => {\r\n  return request.get('/goods.service/list', {\r\n    params: {\r\n      goodsId\r\n    }\r\n  })\r\n}\r\n\r\n//获取nums条商品评论\r\nexport const getGoodsComment = (goodsId, limit) => {\r\n  return request.get('/comment/listRows', {\r\n    params: {\r\n      goodsId,\r\n      limit\r\n    }\r\n  })\r\n}\r\n\r\n//获取商品评价总数\r\nexport const getGoodsCommentCount = goodsId => {\r\n  return request.get('/comment/total', {\r\n    params: {\r\n      goodsId\r\n    }\r\n  })\r\n}\r\n"],"names":["render","_vm","this","_c","_self","staticClass","_l","comments","item","index","key","comment_id","attrs","user","avatar_url","_v","_s","nick_name","model","value","scores","callback","$$v","$set","expression","content","create_time","staticRenderFns","data","commentsScores","props","type","Array","require","created","console","log","watch","newValue","component","on","$event","$router","back","commentCount","all","praise","review","negative","commentsList","getGoodsCommentList","scoreType","goodsId","page","request","get","params","components","commentsListComponent","name","$route","query","computed","id","methods","setCommentList","list","setCommentCount","total","getGoodsCommentCount","handleScores","map","score","searchPro","searchObj","categoryId","goodsName","searchGoods","getGoodsService","getGoodsComment","limit"],"sourceRoot":""}